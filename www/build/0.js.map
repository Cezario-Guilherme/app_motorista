{"version":3,"sources":["../../src/pages/register/register.module.ts","../../src/pages/register/register.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { RegisterPage } from './register';\n\n@NgModule({\n  declarations: [\n    RegisterPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(RegisterPage),\n  ],\n})\nexport class RegisterPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/register/register.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, ToastController, LoadingController } from 'ionic-angular';\nimport { User } from '../../Models/user';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { AngularFireDatabase } from 'angularfire2/database';\nimport { Camera, CameraOptions } from '@ionic-native/camera';\n\n@IonicPage()\n@Component({\n  selector: 'page-register',\n  templateUrl: 'register.html',\n})\nexport class RegisterPage {\n\n  loading = this.loadingCtrl.create({\n    content: 'Carregando...'\n  });\n\n  registerMoto = true;\n  registerUser = false;\n  registerCnh = false;\n  final = false;\n  id: any;\n\n  //variaveis do registro\n\n  confirm_pass: string;\n  nome: string;\n\n  //variaveis do detalhes da moto\n  dataNasc: string;\n  cor: string;\n  placa: string;\n\n  //variaveis de imagem\n  foto: string = ''; \n  public cameraOptions: CameraOptions = {\n    sourceType         : this.camera.PictureSourceType.PHOTOLIBRARY,\n    destinationType    : this.camera.DestinationType.DATA_URL,\n    encodingType       : this.camera.EncodingType.JPEG,\n    mediaType          : this.camera.MediaType.PICTURE,\n  };\n  buscarImg = true;\n  continuar = false;\n\n\n  user = {} as User;\n\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private toast: ToastController,\n    private afAuth: AngularFireAuth,\n    public alertCtrl: AlertController,\n    private db: AngularFireDatabase,\n    private camera: Camera,\n    public loadingCtrl: LoadingController) {\n  }\n\n  detalhesMoto(){\n    if(this.placa == undefined || this.cor == undefined){\n      this.createToast('Você precisa preencher todos os campos');\n    }else{\n      if(this.placa.length != 7){\n        this.createToast('Opa... placa informada não tem quantidades de digitos compativeis');\n    }else{\n      this.registerMoto = false;\n      this.registerCnh = true;\n      this.registerUser = false;\n      this.final = false;\n    }\n  }\n  }\n  buscarImagem(){\n    this.foto = '';\n    this.camera.getPicture(this.cameraOptions).then((imageData) => {\n      let image = 'data:image/jpeg;base64,' + imageData;\n      this.foto = image;\n      if(this.foto.length > 1){\n        this.buscarImg = false;\n        this.continuar = true;\n      }else{\n        this.createToast('Você precisa selecionar uma imagem para continuar');\n      }\n  });\n  }\n  \n  async register(user: User) {\n    if(user.email == undefined || user.password == undefined || this.confirm_pass == undefined || this.nome == undefined){\n      this.createToast('Preencha todos os campos');\n    }else{\n      if(user.password == this.confirm_pass){\n        try {\n          this.loading.present();\n          this.afAuth.auth.createUserWithEmailAndPassword(user.email, user.password)\n          .then((res: any) =>{\n\n            this.id = res.user.uid;\n            this.finalizarCadastro();\n\n          }).catch((error: any) =>{\n            this.loading.dismiss();\n\n            if(error.code == 'auth/network-request-failed'){\n              this.createToast('Vish amigo, você não está conectado a internet');\n            }else if(error.code == 'auth/email-already-in-use'){\n              this.createToast('E-mail ja cadastrado');\n            }else if(error.code == 'auth/weak-password'){\n              this.createToast('Senha precisa ter mais de 6 caracteres');\n            }else{\n              console.log(error);\n            }\n          })\n          \n        } catch (e) {\n          console.error(e);\n        }\n      }\n      else{\n        this.createToast('Senha não confere com a confirmação');\n      }\n    }\n  }\n\n  finalizarCadastro(){\n    this.db.database.ref('pendentes/').child(this.id)\n      .set({ \n        nome: this.nome,\n              placa: this.placa,\n              cor: this.cor,\n              cnh_image: this.foto,\n              email: this.user.email,\n              senha: this.user.password\n            }).then(\n            () => {\n              this.loading.dismiss();\n\n              this.registerUser = false;\n              this.registerMoto = false;\n              this.registerCnh = false;\n              this.final = true;\n            });  \n  }\n\n  abrirInfoUser(){\n    this.registerUser = true;\n    this.registerMoto = false;\n    this.registerCnh = false;\n    this.final = false;\n  }\n\n  setId(id: string):void{\n    this.id = id;\n  }\n  getId():string{\n    return this.id;\n  }\n\n  abrirLogin(){\n    this.navCtrl.pop();\n  }\n\n  createToast(text){\n    this.toast.create({\n      message: text,\n      duration: 3000\n    }).present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/register/register.ts"],"sourceRoot":""}